<div class="container-fluid border">
  <div class="row border">
    <div class="col-8 border">
      <!-- [selectedTable]="this.selectedTable" -->
      <!-- (selected)="onSelect($event)" -->
      <app-normalize-schema-graph
        [schema]="this.schema"
        [(selection)]="this.selectedTable"
        [schemaChanged]="this.schemaChanged.asObservable()"
        (joinFk)="onJoin($event)"
      ></app-normalize-schema-graph>
    </div>
    <div class="col-4 border">
      <app-normalize-undo-redo
        [canUndo]="this.commandProcessor.canUndo()"
        [canRedo]="this.commandProcessor.canRedo()"
        (undo)="onUndo()"
        (redo)="onRedo()"
      ></app-normalize-undo-redo>
      <button type="button" sbb-button (click)="this.onAutoNormalize()">
        {{
          this.selectedTable !== undefined
            ? "Auto-Normalize this table"
            : "Auto-Normalize all tables"
        }}
      </button>
      <input type="text" sbbInput placeholder="Schema Name" />

      <button
        type="button"
        sbb-button
        [disabled]="!this.schemaName"
        (click)="persistSchema(this.schemaName)"
      >
        Persist Schema
      </button>

      <button
        type="button"
        sbb-button
        [disabled]="!this.schemaName"
        (click)="download()"
      >
        Download SQL
      </button>
      <div>{{ sql.databasePreparation }}</div>
      <div>{{ sql.createTableStatements }}</div>
      <div>{{ sql.primaryKeyConstraints }}</div>
      <div>{{ sql.foreignKeyConstraints }}</div>
      <div>{{ sql.dataTransferStatements }}</div>
      <app-normalize-side-bar
        class="normalize-sidebar"
        *ngIf="this.selectedTable"
        [table]="this.selectedTable"
        [schema]="this.schema"
        (splitFd)="onClickSplit($event)"
        (indToFk)="onIndToFk($event)"
      ></app-normalize-side-bar>
    </div>
  </div>
</div>
